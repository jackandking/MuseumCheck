# é¡¹ç›®æ¶æ„ ğŸ—ï¸

è¿™ä»½æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†åšç‰©é¦†æ‰“å¡é¡¹ç›®çš„æŠ€æœ¯æ¶æ„ã€ä»£ç ç»“æ„å’Œè®¾è®¡å†³ç­–ã€‚

## ğŸ¯ æ¶æ„æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ
- **å‰ç«¯ï¼š** çº¯HTMLã€CSSã€JavaScript (ES6+)
- **å­˜å‚¨ï¼š** æµè§ˆå™¨ localStorage
- **éƒ¨ç½²ï¼š** GitHub Pages
- **æµ‹è¯•ï¼š** Jest + jsdom
- **ç‰ˆæœ¬æ§åˆ¶ï¼š** Git + GitHub

### æ¶æ„åŸåˆ™
- **ç®€çº¦ä¼˜å…ˆï¼š** é¿å…è¿‡åº¦å·¥ç¨‹åŒ–
- **ç”¨æˆ·ä½“éªŒï¼š** å“åº”å¼è®¾è®¡ï¼Œå¿«é€ŸåŠ è½½
- **éšç§ä¿æŠ¤ï¼š** æœ¬åœ°å­˜å‚¨ï¼Œæ— æœåŠ¡å™¨æ”¶é›†
- **å¯ç»´æŠ¤æ€§ï¼š** æ¨¡å—åŒ–ä»£ç ï¼Œå®Œæ•´æµ‹è¯•è¦†ç›–

## ğŸ“ æ–‡ä»¶ç»“æ„

```
MuseumCheck/
â”œâ”€â”€ ğŸŒ å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢ (10KB)
â”‚   â”œâ”€â”€ script.js           # æ ¸å¿ƒé€»è¾‘ (393KB)
â”‚   â””â”€â”€ style.css           # æ ·å¼è¡¨ (16KB)
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£ç³»ç»Ÿ
â”‚   â”œâ”€â”€ README.md           # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ TESTING_GUIDE.md    # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ VERSION_MANAGEMENT.md # ç‰ˆæœ¬ç®¡ç†
â”‚   â””â”€â”€ wiki/              # Wikiæ–‡æ¡£ç›®å½•
â”‚       â”œâ”€â”€ Home.md         # Wikié¦–é¡µ
â”‚       â”œâ”€â”€ User-Guide.md   # ç”¨æˆ·æŒ‡å—
â”‚       â”œâ”€â”€ Features.md     # åŠŸèƒ½è¯¦è§£
â”‚       â”œâ”€â”€ FAQ.md          # å¸¸è§é—®é¢˜
â”‚       â”œâ”€â”€ Development-Setup.md # å¼€å‘ç¯å¢ƒ
â”‚       â”œâ”€â”€ Contributing.md # è´¡çŒ®æŒ‡å—
â”‚       â”œâ”€â”€ Architecture.md # é¡¹ç›®æ¶æ„
â”‚       â””â”€â”€ Marketing.md    # è¥é”€å†…å®¹
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯•ç³»ç»Ÿ
â”‚   â”œâ”€â”€ package.json        # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ setup.js        # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚       â”œâ”€â”€ core.test.js    # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”‚       â””â”€â”€ regression.test.js # å›å½’æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ› ï¸ å·¥å…·å’Œé…ç½®
â”‚   â”œâ”€â”€ validate-version.js # ç‰ˆæœ¬éªŒè¯å·¥å…·
â”‚   â”œâ”€â”€ .gitignore         # Gitå¿½ç•¥é…ç½®
â”‚   â”œâ”€â”€ robots.txt         # æœç´¢å¼•æ“é…ç½®
â”‚   â””â”€â”€ sitemap.xml        # ç½‘ç«™åœ°å›¾
â”‚
â”œâ”€â”€ ğŸš€ éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ CNAME              # è‡ªå®šä¹‰åŸŸåé…ç½®
â”‚
â””â”€â”€ ğŸ“ è¥é”€å†…å®¹
    â”œâ”€â”€ çŸ­è§†é¢‘æ–‡æ¡ˆ_æ•…å®«åšç‰©é™¢.md
    â””â”€â”€ çŸ­è§†é¢‘æ–‡æ¡ˆ_ä¸­å›½å›½å®¶åšç‰©é¦†.md
```

## ğŸ§© ä»£ç æ¶æ„

### æ ¸å¿ƒæ¨¡å— (script.js)

#### 1. æ•°æ®å±‚
```javascript
// ç‰ˆæœ¬å’Œæ›´æ–°ä¿¡æ¯
const RECENT_CHANGES = {
    version: "2.2.2",
    lastUpdate: "2024-12-20",
    changes: [...]
};

// åšç‰©é¦†æ•°æ®åº“ (120å®¶åšç‰©é¦†)
const MUSEUMS = [
    {
        id: 'forbidden-city',
        name: 'æ•…å®«åšç‰©é™¢',
        location: 'åŒ—äº¬',
        description: '...',
        tags: ['å†å²', 'å»ºç­‘', 'æ–‡ç‰©'],
        checklists: {
            parent: {
                '3-6': [...],
                '7-12': [...],
                '13-18': [...]
            },
            child: {
                '3-6': [...],
                '7-12': [...],
                '13-18': [...]
            }
        }
    },
    // ... å…¶ä»–119å®¶åšç‰©é¦†
];
```

#### 2. çŠ¶æ€ç®¡ç†
```javascript
// å…¨å±€çŠ¶æ€
let currentAgeGroup = '7-12';
let visitedMuseums = [];
let museumChecklists = {};

// çŠ¶æ€åˆå§‹åŒ–
function initializeApp() {
    loadUserData();
    setupEventListeners();
    updateDisplay();
}

// æ•°æ®æŒä¹…åŒ–
function saveUserData() {
    localStorage.setItem('visitedMuseums', JSON.stringify(visitedMuseums));
    localStorage.setItem('museumChecklists', JSON.stringify(museumChecklists));
}
```

#### 3. ç”¨æˆ·ç•Œé¢å±‚
```javascript
// DOM æ“ä½œ
function updateMuseumGrid() {
    const grid = document.getElementById('museumGrid');
    grid.innerHTML = generateMuseumCards();
}

// äº‹ä»¶å¤„ç†
function setupEventListeners() {
    document.getElementById('ageGroup').addEventListener('change', handleAgeGroupChange);
    // ... å…¶ä»–äº‹ä»¶ç›‘å¬å™¨
}

// æ¨¡æ€æ¡†ç®¡ç†
function openMuseumModal(museumId) {
    const modal = document.getElementById('museumModal');
    modal.classList.remove('hidden');
    renderMuseumDetails(museumId);
}
```

#### 4. ä¸šåŠ¡é€»è¾‘å±‚
```javascript
// æ¸…å•ç®¡ç†
function toggleChecklistItem(museumId, listType, ageGroup, index) {
    const key = `${museumId}-${listType}-${ageGroup}`;
    if (!museumChecklists[key]) {
        museumChecklists[key] = [];
    }
    // åˆ‡æ¢å®ŒæˆçŠ¶æ€
    const itemIndex = museumChecklists[key].indexOf(index);
    if (itemIndex > -1) {
        museumChecklists[key].splice(itemIndex, 1);
    } else {
        museumChecklists[key].push(index);
    }
    saveUserData();
}

// è¿›åº¦è®¡ç®—
function calculateProgress() {
    const totalMuseums = MUSEUMS.length;
    const visitedCount = visitedMuseums.length;
    return {
        count: visitedCount,
        total: totalMuseums,
        percentage: ((visitedCount / totalMuseums) * 100).toFixed(1)
    };
}
```

### æ ·å¼æ¶æ„ (style.css)

#### 1. CSS å˜é‡ç³»ç»Ÿ
```css
:root {
    /* ä¸»è‰²è°ƒ */
    --primary-color: #d32f2f;
    --secondary-color: #f57c00;
    --accent-color: #1976d2;
    
    /* ä¸­æ€§è‰² */
    --text-primary: #212121;
    --text-secondary: #757575;
    --background: #fafafa;
    
    /* é—´è·ç³»ç»Ÿ */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* å­—ä½“å¤§å° */
    --font-xs: 12px;
    --font-sm: 14px;
    --font-md: 16px;
    --font-lg: 18px;
    --font-xl: 24px;
}
```

#### 2. å“åº”å¼å¸ƒå±€
```css
/* ç§»åŠ¨ä¼˜å…ˆè®¾è®¡ */
.museum-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
}

/* å¹³æ¿é€‚é… */
@media (min-width: 768px) {
    .museum-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* æ¡Œé¢é€‚é… */
@media (min-width: 1024px) {
    .museum-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}
```

#### 3. ç»„ä»¶æ ·å¼
```css
/* åšç‰©é¦†å¡ç‰‡ */
.museum-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: var(--spacing-lg);
    transition: transform 0.2s ease;
}

.museum-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

/* æ¨¡æ€æ¡† */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
```

## ğŸ”„ æ•°æ®æµæ¶æ„

### æ•°æ®æµå‘
```
ç”¨æˆ·æ“ä½œ â†’ äº‹ä»¶å¤„ç† â†’ çŠ¶æ€æ›´æ–° â†’ localStorage â†’ ç•Œé¢é‡æ¸²æŸ“
```

### å…·ä½“æµç¨‹

#### 1. åº”ç”¨å¯åŠ¨
```
1. é¡µé¢åŠ è½½ â†’ DOMContentLoaded
2. åˆå§‹åŒ–åº”ç”¨ â†’ initializeApp()
3. ä» localStorage åŠ è½½æ•°æ® â†’ loadUserData()
4. æ¸²æŸ“åˆå§‹ç•Œé¢ â†’ updateMuseumGrid()
5. ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ â†’ setupEventListeners()
```

#### 2. ç”¨æˆ·äº¤äº’
```
å¹´é¾„ç»„é€‰æ‹©ï¼š
ç”¨æˆ·é€‰æ‹© â†’ changeäº‹ä»¶ â†’ handleAgeGroupChange() â†’ 
æ›´æ–°å…¨å±€çŠ¶æ€ â†’ é‡æ–°æ¸²æŸ“åšç‰©é¦†ç½‘æ ¼ â†’ ä¿å­˜åå¥½

åšç‰©é¦†ç‚¹å‡»ï¼š
ç‚¹å‡»å¡ç‰‡ â†’ clickäº‹ä»¶ â†’ openMuseumModal() â†’ 
è·å–åšç‰©é¦†æ•°æ® â†’ æ¸²æŸ“æ¨¡æ€æ¡†å†…å®¹ â†’ æ˜¾ç¤ºè¯¦æƒ…

ä»»åŠ¡å‹¾é€‰ï¼š
å‹¾é€‰ä»»åŠ¡ â†’ changeäº‹ä»¶ â†’ toggleChecklistItem() â†’ 
æ›´æ–°å®ŒæˆçŠ¶æ€ â†’ ä¿å­˜åˆ°localStorage â†’ æ›´æ–°ç•Œé¢
```

#### 3. æ•°æ®æŒä¹…åŒ–
```
çŠ¶æ€å˜æ›´ â†’ saveUserData() â†’ localStorage.setItem() â†’ 
æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ â†’ ä¸‹æ¬¡è®¿é—®æ—¶æ¢å¤çŠ¶æ€
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### åŠ è½½æ€§èƒ½
- **ä»£ç åˆ†å‰²ï¼š** å•æ–‡ä»¶æ¶æ„é¿å…ç½‘ç»œè¯·æ±‚å¼€é”€
- **èµ„æºå‹ç¼©ï¼š** CSS/JSæ–‡ä»¶ç»“æ„ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥ï¼š** æµè§ˆå™¨ç¼“å­˜å’ŒlocalStorage
- **æ‡’åŠ è½½ï¼š** æ¨¡æ€æ¡†å†…å®¹æŒ‰éœ€æ¸²æŸ“

### è¿è¡Œæ—¶æ€§èƒ½
- **DOMæ“ä½œä¼˜åŒ–ï¼š** æ‰¹é‡æ›´æ–°ï¼Œé¿å…é¢‘ç¹é‡æ’
- **äº‹ä»¶å§”æ‰˜ï¼š** å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡
- **å†…å­˜ç®¡ç†ï¼š** åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å¼•ç”¨
- **ç®—æ³•ä¼˜åŒ–ï¼š** é«˜æ•ˆçš„æ•°æ®æŸ¥æ‰¾å’Œè¿‡æ»¤

### æ•°æ®å­˜å‚¨ä¼˜åŒ–
```javascript
// é«˜æ•ˆçš„æ•°æ®ç»“æ„
const museumMap = new Map();
MUSEUMS.forEach(museum => {
    museumMap.set(museum.id, museum);
});

// å¿«é€ŸæŸ¥æ‰¾
function findMuseum(id) {
    return museumMap.get(id);
}

// å‹ç¼©å­˜å‚¨
function compressData(data) {
    return JSON.stringify(data);
}
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### æ•°æ®å®‰å…¨
- **æœ¬åœ°å­˜å‚¨ï¼š** æ•°æ®ä¸ç¦»å¼€ç”¨æˆ·è®¾å¤‡
- **XSSé˜²æŠ¤ï¼š** innerHTMLä½¿ç”¨ä¸¥æ ¼éªŒè¯
- **éšç§ä¿æŠ¤ï¼š** ä¸æ”¶é›†ä»»ä½•ä¸ªäººä¿¡æ¯

### ä»£ç å®‰å…¨
```javascript
// è¾“å…¥éªŒè¯
function sanitizeInput(input) {
    return input.replace(/[<>\"']/g, '');
}

// å®‰å…¨çš„DOMæ“ä½œ
function setTextContent(element, text) {
    element.textContent = sanitizeInput(text);
}
```

## ğŸ§ª æµ‹è¯•æ¶æ„

### æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•ï¼š** æ ¸å¿ƒåŠŸèƒ½é€»è¾‘æµ‹è¯•
- **é›†æˆæµ‹è¯•ï¼š** ç»„ä»¶é—´äº¤äº’æµ‹è¯•
- **å›å½’æµ‹è¯•ï¼š** é˜²æ­¢å·²ä¿®å¤bugå¤ç°
- **æ‰‹åŠ¨æµ‹è¯•ï¼š** ç”¨æˆ·ç•Œé¢å’Œä½“éªŒæµ‹è¯•

### æµ‹è¯•ç¯å¢ƒé…ç½®
```javascript
// Jesté…ç½® (package.json)
{
  "testEnvironment": "jsdom",
  "setupFilesAfterEnv": ["./tests/setup.js"],
  "collectCoverageFrom": ["script.js"],
  "coverageThreshold": {
    "global": {
      "branches": 70,
      "functions": 70,
      "lines": 70,
      "statements": 70
    }
  }
}
```

### Mockå’Œæ¨¡æ‹Ÿ
```javascript
// localStorage æ¨¡æ‹Ÿ
const localStorageMock = (() => {
    let store = {};
    return {
        getItem: jest.fn(key => store[key] || null),
        setItem: jest.fn((key, value) => store[key] = value),
        clear: jest.fn(() => store = {}),
        removeItem: jest.fn(key => delete store[key])
    };
})();
```

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†æ¶æ„

### é›†ä¸­å¼ç‰ˆæœ¬ç³»ç»Ÿ
```javascript
// å•ä¸€æ•°æ®æº (script.js)
const RECENT_CHANGES = {
    version: "x.y.z",
    lastUpdate: "YYYY-MM-DD",
    changes: [
        {
            date: "YYYY-MM-DD",
            version: "x.y.z",
            title: "æ›´æ–°æ ‡é¢˜",
            description: "è¯¦ç»†æè¿°",
            type: "feature|improvement|bugfix"
        }
    ]
};
```

### è‡ªåŠ¨åŒ–éªŒè¯
```javascript
// validate-version.js
function validateVersionConsistency() {
    // æ£€æŸ¥ç‰ˆæœ¬æ ¼å¼
    // éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§
    // ç¡®ä¿ç‰ˆæœ¬é€’å¢
    // æ£€æŸ¥ç¡¬ç¼–ç ç‰ˆæœ¬
}
```

## ğŸŒ éƒ¨ç½²æ¶æ„

### GitHub Pageséƒ¨ç½²
```
GitHub Repository â†’ Actions Workflow â†’ 
GitHub Pages â†’ CDN â†’ ç”¨æˆ·æµè§ˆå™¨
```

### è‡ªå®šä¹‰åŸŸå
```
museumcheck.cn â†’ GitHub Pages â†’ åšç‰©é¦†æ‰“å¡.cn 
GitHub Pages â†’ SSLè¯ä¹¦ â†’ HTTPSè®¿é—®
```

### CI/CDæµç¨‹ï¼ˆè§„åˆ’ä¸­ï¼‰
```yaml
# .github/workflows/deploy.yml
name: Deploy to GitHub Pages
on:
  push:
    branches: [ main ]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run tests
      run: npm test
    - name: Validate version
      run: node validate-version.js
    - name: Deploy to Pages
      uses: peaceiris/actions-gh-pages@v3
```

## ğŸ”® æ¶æ„æ¼”è¿›

### çŸ­æœŸä¼˜åŒ–
- **ä»£ç åˆ†å‰²ï¼š** å°†script.jsæŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†
- **æ„å»ºå·¥å…·ï¼š** å¼•å…¥Webpackæˆ–Viteè¿›è¡Œæ„å»ºä¼˜åŒ–
- **PWAæ”¯æŒï¼š** æ·»åŠ Service Workerå®ç°ç¦»çº¿è®¿é—®

### ä¸­æœŸé‡æ„
- **TypeScriptï¼š** å¢å¼ºç±»å‹å®‰å…¨æ€§
- **çŠ¶æ€ç®¡ç†ï¼š** å¼•å…¥Vuexæˆ–Reduxç®¡ç†å¤æ‚çŠ¶æ€
- **ç»„ä»¶åŒ–ï¼š** ä½¿ç”¨Vue.jsæˆ–Reacté‡æ„ç•Œé¢

### é•¿æœŸè§„åˆ’
- **å¾®æœåŠ¡æ¶æ„ï¼š** åç«¯APIå’Œå‰ç«¯åˆ†ç¦»
- **æ•°æ®åº“ï¼š** æ”¯æŒç”¨æˆ·è´¦æˆ·å’Œäº‘ç«¯åŒæ­¥
- **å¤šç«¯æ”¯æŒï¼š** å¼€å‘ç§»åŠ¨ç«¯App

---

**å½“å‰æ¶æ„ç®€æ´é«˜æ•ˆï¼Œæ”¯æŒå¿«é€Ÿè¿­ä»£å’ŒåŠŸèƒ½æ‰©å±•ï¼** ğŸ—ï¸âœ¨